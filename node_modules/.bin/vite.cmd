@ECHO off
GOTO start

:find_dp0
SET dp0=%~dp0
EXIT /b

:start
SETLOCAL
CALL :find_dp0

REM Check if node.exe exists in the current directory
IF EXIST "%dp0%\node.exe" (
  SET "_prog=%dp0%\node.exe"
) ELSE (
  SET "_prog=node"
  SET PATHEXT=%PATHEXT:;.JS;=;%
)

REM Ensure correct path and command to execute vite.js
SET viteScript="%dp0%\..\vite\bin\vite.js"

REM Check if vite.js exists
IF EXIST %viteScript% (
  REM Execute vite.js using Node.js
  "%_prog%" "%viteScript%" %*
) ELSE (
  ECHO Vite script not found: %viteScript%
)

REM End script
endLocal
EXIT /b
